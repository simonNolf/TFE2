<VirtualHost *:80>
    ServerName example.com

    # Redirection vers le frontend (frontend IP : 172.20.0.4)
    ProxyPass / http://172.20.0.4/
    ProxyPassReverse / http://172.20.0.4/
    ProxyPreserveHost On
    ProxyRequests Off
    <Proxy *>
        Order allow,deny
        Allow from all
    </Proxy>

    # Redirection vers le backend (backend IP : 172.20.0.3)
    ProxyPass /api http://172.20.0.3:3000/api
    ProxyPassReverse /api http://172.20.0.3:3000/api
    ProxyPreserveHost On
    ProxyRequests Off
    <Proxy *>
        Order allow,deny
        Allow from all
    </Proxy>

    # Réécriture d'URL
    RewriteEngine On

    # Redirection de toutes les URL vers /index.html
    RewriteRule ^(.*)$ /index.html [L]

    # Ajouter d'autres configurations si nécessaire

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
